<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Task</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <%- include('../partials/header') %>
    <main class="container">
        <h2>Edit Task</h2>
        <form method="post" action="/tasks/<%= task._id %>?_method=PUT">
            <label>Title
                <input required name="title" value="<%= task.title %>">
            </label>
            <label>Room
                <select name="room" required>
                    <option value="Kitchen" <%= task.room === 'Kitchen' ? 'selected' : '' %>>Kitchen</option>
                    <option value="Living Room" <%= task.room === 'Living Room' ? 'selected' : '' %>>Living Room</option>
                    <option value="Bathroom" <%= task.room === 'Bathroom' ? 'selected' : '' %>>Bathroom</option>
                    <option value="Bedroom" <%= task.room === 'Bedroom' ? 'selected' : '' %>>Bedroom</option>
                    <option value="Garage" <%= task.room === 'Garage' ? 'selected' : '' %>>Garage</option>
                    <option value="Yard" <%= task.room === 'Yard' ? 'selected' : '' %>>Yard</option>
                    <option value="Other" <%= task.room === 'Other' ? 'selected' : '' %>>Other</option>
                </select>
            </label>
            <label>Priority
                <select name="priority" required>
                    <option value="Low" <%= task.priority === 'Low' ? 'selected' : '' %>>Low</option>
                    <option value="Medium" <%= task.priority === 'Medium' ? 'selected' : '' %>>Medium</option>
                    <option value="High" <%= task.priority === 'High' ? 'selected' : '' %>>High</option>
                </select>
            </label>
            <label>Assignee
                <input name="assignee" value="<%= task.assignee %>">
            </label>
            <label>Due Date
                <input 
                    name="dueDate" 
                    type="date" 
                    value="<%= task.dueDate ? new Date(task.dueDate).toLocaleDateString('en-US') : '' %>"
                    min="<%= new Date().toLocaleDateString('en-US') %>"
                >
            </label>
            <label>Notes
                <input name="notes" value="<%= task.notes %>">
            </label>
            <label>Completed
                <input name="completed" type="checkbox" <%= task.completed ? 'checked' : '' %>>
            </label>
            <button>Save</button>
        </form>
    </main>
    <%- include('../partials/footer') %>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Task</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <%- include('../partials/header') %>
    <main class="container">
        <h2>Add Task</h2>
        <form action="/tasks" method="post">
            <label>Title
                <input required name="title">
                <% if (errors && errors.title) { %>
                    <span class="error"><%= errors.title.message %></span>
                <% } %>
            </label>
            <label>Room
                <select name="room" required>
                    <option value="Kitchen" <%= task.room === 'Kitchen' ? 'selected' : '' %>>Kitchen</option>
                    <option value="Living Room" <%= task.room === 'Living Room' ? 'selected' : '' %>>Living Room</option>
                    <option value="Bathroom" <%= task.room === 'Bathroom' ? 'selected' : '' %>>Bathroom</option>
                    <option value="Bedroom" <%= task.room === 'Bedroom' ? 'selected' : '' %>>Bedroom</option>
                    <option value="Garage" <%= task.room === 'Garage' ? 'selected' : '' %>>Garage</option>
                    <option value="Yard" <%= task.room === 'Yard' ? 'selected' : '' %>>Yard</option>
                    <option value="Other" <%= task.room === 'Other' ? 'selected' : '' %>>Other</option>
                </select>
                <% if (errors && errors.room) { %>
                    <span class="error"><%= errors.room.message %></span>
                <% } %>
            </label>
            <label>Priority
                <select name="priority" required>
                    <option value="Low" <%= task.priority === 'Low' ? 'selected' : '' %>>Low</option>
                    <option value="Medium" <%= task.priority === 'Medium' ? 'selected' : '' %>>Medium</option>
                    <option value="High" <%= task.priority === 'High' ? 'selected' : '' %>>High</option>
                </select>
                <% if (errors && errors.priority) { %>
                    <span class="error"><%= errors.priority.message %></span>
                <% } %>
            </label>
            <label>Assignee (optional)
                <input name="assignee">
            </label>
            <label>Due Date (optional)
                <input 
                    name="dueDate" 
                    type="date" 
                    value="<%= task.dueDate ? new Date(task.dueDate).toISOString().split('T')[0] : '' %>"
                    min="<%= new Date().toISOString().split('T')[0] %>"
                >
            </label>
            <label>Notes (optional)
                <input name="notes">
            </label>
            <button>Add</button>
        </form>
    </main>
    <%- include('../partials/footer') %>
</body>
</html>